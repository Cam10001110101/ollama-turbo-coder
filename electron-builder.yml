appId: com.ollama.turbo
productName: Ollama Turbo Desktop
artifactName: "${productName}-${version}.${ext}"
copyright: "Copyright Â© 2025 Groq"

directories:
  buildResources: build
  output: release

files:
  - "dist/**/*"
  - "electron/**/*"
  - "shared/**/*"
  - "node_modules/**/*"
  - "!**/.vscode/*"
  - "!src/*"
  - "!electron.vite.config.{js,ts,mjs,cjs}"
  - "!{.eslintignore,.eslintrc.cjs,.prettierignore,.prettierrc.yaml,dev-app-update.yml,CHANGELOG.md,README.md}"
  - "!{.env,.env.*,.npmrc,pnpm-lock.yaml}"
  - "!{tsconfig.json,tsconfig.node.json,tsconfig.web.json}"

extraMetadata:
  main: electron/main.js

# Ensure all dependencies are properly included
includeSubNodeModules: true
nodeGypRebuild: false

# macOS Configuration
mac:
  category: public.app-category.developer-tools
  target:
    - dmg
    - zip
  icon: build/icon.icns
  darkModeSupport: true
  hardenedRuntime: false
  gatekeeperAssess: false
  identity: null
  extendInfo:
    NSRequiresAquaSystemAppearance: false

# Windows Configuration
win:
  target:
    - nsis
    - portable
  icon: build/icon.ico
  publisherName: Groq
  verifyUpdateCodeSignature: false
  requestedExecutionLevel: asInvoker

nsis:
  oneClick: false
  perMachine: false
  allowToChangeInstallationDirectory: true
  installerIcon: build/installerIcon.ico
  uninstallerIcon: build/uninstallerIcon.ico
  installerHeaderIcon: build/installerHeaderIcon.ico
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: Groq Desktop
  runAfterFinish: true
  deleteAppDataOnUninstall: false
  include: build/installer.nsh

# Linux Configuration
linux:
  target:
    - AppImage
    - deb
    - rpm
  category: Development
  synopsis: Local Groq Desktop chat app with MCP support
  description: Chat interface with image support and local MCP servers for Groq models
  vendor: Groq
  maintainer: Groq
  icon: build/icon.png
  executableName: groq-desktop

publish:
  provider: github
  owner: Cam10001110101
  repo: ollama-turbo-coder

# Make sure scripts are executable
fileAssociations:
  - ext: sh
    role: Shell
    perMachine: true
    isExecutable: true
  - ext: cmd
    role: Command
    perMachine: true
    isExecutable: true 
  - ext: ps1
    role: PowerShell
    perMachine: true
    isExecutable: true

# Ensure executable permissions are set
asarUnpack:
  - "electron/scripts/*.sh"
  - "electron/scripts/*.cmd"
  - "electron/scripts/*.ps1"